#!/usr/bin/ruby -w

require 'optparse'

options = {}
macs = []

optparse = OptionParser.new do|opts|
  # Set a banner, displayed at the top
  # of the help screen.
  opts.banner = "Usage: wol -h HOST ff:ff:ff:ff:ff:ff"

  # Define the options, and what they do
  options[:brief] = false
  opts.on( '-b', '--brief', 'Only output the number of MagicPackets sent' ) do
    options[:brief] = true
  end

  options[:address] = nil
  opts.on( '-a', '--address ADDRESS', 'Write log to ADDRESS' ) do |address|
    options[:address] = address
  end

  opts.on( '-h', '--help', 'Display this text' ) do
    puts opts
    exit
  end
end

optparse.parse!

options.each do |o|
  puts o
end

ARGV.each do |mac|
  macs << mac if /^(\S{1,2}:\S{1,2}:\S{1,2}:\S{1,2}:\S{1,2}:\S{1,2})?$/.match(mac)
end

puts macs